# Telecrafter
## Мост между Minecraft и Telegram

Данный плагин для Paper позволяет игрокам в Minecraft общаться с пользователями в Telegram и наоборот, а админы могут
отправлять команды, не заходя на сервер!

### Совместимость
Paper 1.16.5+

### Сборка

**Для сборки необходима JDK 11**

**Windows:**
`gradlew.bat shadowJar`

**Linux/Mac:**
`./gradlew shadowJar`

Jar плагина будет лежать в `build/libs`


### Конфигурация

Перед запуском сервера создайте файл `plugins/Telecrafter/config.yml` со следующим содержимым:
```
botToken: токен вашего бота
botName: имя бота без @
chatId: id чата в который будет писать бот
allowForeignChats: false # могут ли юзеры юзать бота в других чатах (админы могут всегда)

admins: # id админов в Telegram которым будут доступны дополнительные команды
 - 123453242
 - 678914242
 - 428483242

# телеграм-команды, которые должны быть доступны только админам (даже если по умолчанию они доступны юзерам)
# Чтобы оставить список пустым, используйте [] тут
forceAdminCommands:
 - /plugins

aliases: # Список алиасов. Если не нужны - в значении этого ключа поставьте {}
 hello: # имя алиаса. из тг можно будет такой алиас вызывать как /hello
  command: say привет # команда, которая будет отправлена серверу
  description: сказать всем "привет" на сервере
  adminOnly: true # можно не писать, по умолчанию false
```

### Команды Telegram:

##### Команды, доступные всем:

`/mc сообщение` - отправить сообщение из телеграма в майнкрафт

`/mnow` - посмотреть текущий онлайн

`/plugins` - просмотр установленных плагинов

`/help` - краткая справка по командам

`/zadrotop` - топ игроков по времени

`/aliases` - просмотр алиасов (кастомных команд, которые запускаются из телеграма)

##### Команды, доступные админам:

`/cleardrop` - очистка всех миров от дропа (работает даже на незагруженных чанках!)

`/respack` - изменение/получение ссылки на ресурспак. Для просмотра отправьте команду без аргументов. Для изменения

- `/respack url`, например, `/respack http://dropbox.com/respack.zip`

`/logs` - Получение логов. **Работает только в лс.** Отправка команды без аргументов вернет последний лог. `/logs list`
для просмотра списка доступных логов. `/logs filename` для получения логов с именем filename,
например, `/logs 2020-11-01-1.log.gz`

`/rc` - отправка команды на сервер. Например, `/rc time set day`, или `/rc ban badPlayer`. Команды из плагинов тоже
работают!.

`/confrel` - релоад конфига с диска

### Разрешения (настраиваются на самом сервере, например, через LuckPerms):

`telecrafter.receive` - по умолчанию вешается на любого игрока. Если у игрока есть данное разрешение, то он сможет
видеть в игре сообщения из телеграма

`telecafter.send` - по умолчанию вешается на любого игрока. Если у игрока есть данное разрешение, то его сообщения в
игре будут отправляться в телеграм